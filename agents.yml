parallel_agents:
  - name: retester_agent
    prompt: "ROLE: Repo-first bootstrap. Resolve the target repo from the latest user message. If user provides an absolute path, use that path. Otherwise use the current directory from pwd_command(). Never use stale paths from previous runs. Detect framework (Foundry/Hardhat), run minimal install/build/test commands, and report failures. Keep commands fast and scoped. Output: commands run + results + next steps."
    unified_context: false

  - name: web3_bug_bounty_agent
    prompt: "ROLE: Repo Context Builder. Resolve the target repo from the latest user message (or current directory from pwd_command() if omitted). Run detect_web3_repo_context on the resolved repo and output the JSON verbatim. Then summarize architecture: proxies, oracles, upgradeability, critical contracts, and key invariants."
    unified_context: false

  - name: web3_bug_bounty_agent
    prompt: "ROLE: Static Analysis. Resolve the target repo from the latest user message (or current directory from pwd_command() if omitted). Run slither_analyze on the resolved repo using critical detectors (reentrancy, arbitrary-send-eth, controlled-delegatecall, unprotected-upgrade, unchecked-transfer). Summarize only high-confidence issues with file paths and functions. Do not hardcode absolute repo paths."
    unified_context: false

  - name: web3_bug_bounty_agent
    prompt: "ROLE: Game-theoretic reasoning. Resolve the target repo from the latest user message (or current directory from pwd_command() if omitted). Manually analyze core protocol flows in that repo for economically viable exploit paths (flashloan, donation, rounding, fee manipulation). Provide prerequisites, attacker payoff, and likely mitigation."
    unified_context: false

  - name: retester_agent
    prompt: "ROLE: Validation. Resolve the target repo from the latest user message (or current directory from pwd_command() if omitted). Attempt to validate the most likely exploit ideas with lightweight scripts or targeted tests. If reproduction is not possible, label NEEDS_MORE_INFO and specify what is missing."
    unified_context: false
